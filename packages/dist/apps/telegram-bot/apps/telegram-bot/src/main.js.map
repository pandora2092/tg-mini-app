{
  "version": 3,
  "sources": ["../../../../../../apps/telegram-bot/src/main.ts"],
  "sourcesContent": ["import { Telegraf } from 'telegraf';\nimport axios from 'axios';\n\nconst API_URL = process.env.API_URL || 'http://localhost:3333/api';\n \nconst token = \"8007424641:AAF7JR370t8mr5icW4qGvRyPk1jIsz_aGFc\";\nconst bot = new Telegraf(token as string);\n\nbot.start(async (ctx) => {\n  const chatId = String(ctx.chat.id);\n  const username = ctx.from?.username || 'unknown';\n  try {\n    const res = await axios.post(`${API_URL}/users`, { chatId, username });\n    const user = res.data;\n\n    await ctx.reply(\n      '\u041E\u0442\u043A\u0440\u043E\u0439 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435:',\n      {\n        reply_markup: {\n          inline_keyboard: [[{ text: '\u041E\u0442\u043A\u0440\u044B\u0442\u044C Mini App', web_app: { url: 'https://help-afisha.ru/' } }]]\n        }\n      }\n    );\n  } catch (e) {\n    console.error(e);\n    await ctx.reply('\u26A0\uFE0F \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F');\n  }\n});\n\nbot.help((ctx) => ctx.reply('\u041D\u0430\u043F\u0438\u0448\u0438 /start \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u0447\u0430\u0442\u044C \uD83D\uDE80'));\nbot.on('text', (ctx) => ctx.reply(`\u0422\u044B \u043D\u0430\u043F\u0438\u0441\u0430\u043B: ${ctx.message.text}`));\n\nbot.launch();\n\nprocess.once('SIGINT', () => bot.stop('SIGINT'));\nprocess.once('SIGTERM', () => bot.stop('SIGTERM'));"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAAA,sBAAyB;AACzB,mBAAkB;AAElB,MAAM,UAAU,QAAQ,IAAI,WAAW;AAEvC,MAAM,QAAQ;AACd,MAAM,MAAM,IAAI,yBAAS,KAAe;AAExC,IAAI,MAAM,OAAO,QAAQ;AACvB,QAAM,SAAS,OAAO,IAAI,KAAK,EAAE;AACjC,QAAM,WAAW,IAAI,MAAM,YAAY;AACvC,MAAI;AACF,UAAM,MAAM,MAAM,aAAAA,QAAM,KAAK,GAAG,OAAO,UAAU,EAAE,QAAQ,SAAS,CAAC;AACrE,UAAM,OAAO,IAAI;AAEjB,UAAM,IAAI;AAAA,MACR;AAAA,MACA;AAAA,QACE,cAAc;AAAA,UACZ,iBAAiB,CAAC,CAAC,EAAE,MAAM,uDAAoB,SAAS,EAAE,KAAK,0BAA0B,EAAE,CAAC,CAAC;AAAA,QAC/F;AAAA,MACF;AAAA,IACF;AAAA,EACF,SAAS,GAAG;AACV,YAAQ,MAAM,CAAC;AACf,UAAM,IAAI,MAAM,4MAAuC;AAAA,EACzD;AACF,CAAC;AAED,IAAI,KAAK,CAAC,QAAQ,IAAI,MAAM,2HAA+B,CAAC;AAC5D,IAAI,GAAG,QAAQ,CAAC,QAAQ,IAAI,MAAM,4DAAe,IAAI,QAAQ,IAAI,EAAE,CAAC;AAEpE,IAAI,OAAO;AAEX,QAAQ,KAAK,UAAU,MAAM,IAAI,KAAK,QAAQ,CAAC;AAC/C,QAAQ,KAAK,WAAW,MAAM,IAAI,KAAK,SAAS,CAAC;",
  "names": ["axios"]
}
